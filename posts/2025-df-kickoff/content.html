<h2 id="digital-fabrication-week-0">Digital Fabrication, week 0</h2>
<p>This is something I‚Äôve been waiting for for a while now. Electronics
has been a topic on the backlog for me for several years already. A year
ago, I started actually getting more interested in it as a possibility
to repurpose consumer electronics that have been lying around the house,
somewhat at the end of their (conventional) lifespan.</p>
<p>Shortly, I came across the Aalto University Digital Fabrication minor
and got <em>very</em> excited. But when I looked into it, I found out
that you had to make a separate application and that the application
period had already ended (queue sad trombone noise). However, I got very
motivated to make sure that I get into that minor the next time it ran.
In the meantime, I found the ‚ÄúElectronics workshop‚Äù course in Aalto and
I got my electronics fix from that.</p>
<p>Come last autumn, my hands were itching to write the application for
this year‚Äôs Digital Fabrication minor. Eventually, I of course found out
that this year there is no separate application. I didn‚Äôt expect I‚Äôd
ever be disappointed by that but there you go.</p>
<p>This week, it finally started. I‚Äôm a little bit too ready for it as I
want to already just jump into CNC-milling, PCB-design, really any of
the things I haven‚Äôt tried yet. But I should take it easy. I got the
excellent advice of a Digital Fabrication alumnus that I should really
plan for stamina since the minor will be quite intensive.</p>
<h3 id="website">Website</h3>
<p>Time to get meta. The first task for us was to create a documentation
website. If you‚Äôre reading this, I guess I‚Äôve succeeded üéâ. I‚Äôve been
wanting to make a personal portfolio website for some time already and
have also made a couple poor first drafts. Software-wise, my latest
interests have been <a href="https://www.rust-lang.org/">the Rust
language</a> and the <a href="https://htmx.org/">HTMX</a> javascript
library(?), which is why those two make an excellent base for the
software in my website. When I‚Äôm learning some other
language/framework/paradigm I can then rewrite the website with that and
learn something new all over again!</p>
<p>I‚Äôm also quite interested in trying out weird shit in web
development. One idea I sloshed around in my mind was how I‚Äôd do content
management. The website will be somewhat of a blog, meaning that I need
to create posts somehow. I quite enjoy writing longer form in <a
href="https://www.markdownguide.org">Markdown</a> and thus wanted to use
that somehow for content management. First, I thought I‚Äôd do client-side
rendering with a JS library such as <a
href="https://marked.js.org">Marked</a>, but then I realized I might as
well just compile the posts into HTML beforehand and the server can then
dish them out.</p>
<p>Another item in the ‚Äúweird shit‚Äù -list was the colors.In a previous
run of my portfolio site, I made this random palette generator that
adheres to the <a
href="https://www.w3.org/TR/WCAG21/#contrast-enhanced">WCAG 2.1
standard</a>. I wanted to port that to the new site as I do like the
idea. After getting a basic <a href="https://actix.rs/">actix-web</a>
server running and HTMX successfully loading stuff into the DOM from
there, I jumped on the color porting. There was nothing super difficult
about it, but in the original Typescript implementation, I used a couple
different JS libraries to handle the color formats and, importantly,
check for the contrast between colors. Initially, I thought of just
importing the same libraries in the HTML. I tried the idea on for size,
but it was bugging me a bit. As HTMX has quite a backend-heavy approach
to client-side state, I wanted to lean into that and try and have as
little JS as I could. Following that, I realized I could just generate
the colors on the backend! I was already planning on using a <a
href="https://en.wikipedia.org/wiki/Web_template_system">templating
engine</a> so I could approach the colors in the same way.</p>
<p>The first templating engine I tried was <a
href="https://rinja-rs.github.io/askama/">Askama</a>. It did the trick
initially and I could move on to actually generating the colors. The
color generator works by utilizing <a
href="https://en.wikipedia.org/wiki/HSL_and_HSV">the HSL colorspace</a>.
It first picks a random hue and some fairly low value for saturation and
a high one for lightness. Then it iteratively increases the saturation
and decreases lightness until the resulting color has a contrast ratio
above 4.5 (WCAG defined value for standard text against a background)
with the original color. I needed to replace the contrast checker with
something rust-based. I quickly found <a
href="https://docs.rs/palette/latest/palette/">palette</a>, quite an
advanced rust crate for managing colors between different color spaces,
getting quite deep into color theory even. It was excessive for my
needs, but there did not seem to be anything else that would work (AND
remain stable in the longer term!) so I went with it.</p>
<p>Calculating the color contrast with the palette crate seemed like an
easy task, but, well, there is a but.</p>
